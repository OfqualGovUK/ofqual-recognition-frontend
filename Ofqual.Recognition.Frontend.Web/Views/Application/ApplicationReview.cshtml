@using Ofqual.Recognition.Frontend.Core.Constants
@using Ofqual.Recognition.Frontend.Core.Enums
@using Ofqual.Recognition.Frontend.Web.ViewModels

@model TaskReviewViewModel

@section BackLink {
    <a href="@(RouteConstants.ApplicationConstants.TASK_LIST_PATH)" class="govuk-back-link">Back</a>
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
        <h1 class="govuk-heading-l">
            Review your application
        </h1>
          
        @if (Model.SectionHeadings.Any())
        {
            @foreach (var SectionHeading in Model.SectionHeadings)
            {
                <h2 class="govuk-heading-m">
                    @SectionHeading.Title
                </h2>
                @foreach(var Section in SectionHeading.Items)
                {
                    <div class="govuk-summary-card">
                        <div class="govuk-summary-card__title-wrapper">
                            <h2 class="govuk-summary-card__title">
                                @Section.Title
                            </h2>
                        </div>
                        <div class="govuk-summary-card__content">
                            <dl class="govuk-summary-list">
                                
                                @foreach (var AnswerItem in Section.QuestionAnswers)
                                {
                                    <div class="govuk-summary-list__row">
                                        <dt class="govuk-summary-list__key">
                                            @AnswerItem.Question
                                        </dt>
                                        <dd class="govuk-summary-list__value">
                                            @AnswerItem.Answer
                                        </dd>
                                        <dd class="govuk-summary-list__actions">
                                            <a class="govuk-link" href=@AnswerItem.QuestionURL>
                                                Change<span class="govuk-visually-hidden">
                                                    @AnswerItem.Question
                                                </span>
                                            </a>
                                        </dd>
                                    </div>
                                }                                
                            </dl>                            
                        </div>
                    </div>                              
                }
            }       
        }
          
                        
        <div class="govuk-form-group">
            <form method="post" asp-action="taskreview">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
                        <h2 class="govuk-fieldset__heading">
                            Have you completed the review?
                        </h2>
                        <div id="changedName-hint" class="govuk-hint">
                            Once you have completed the review you can make your declaration and submit your application
                        </div>
                    </legend>
                    <div class="govuk-radios" data-module="govuk-radios">
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="yes" name="answer" type="radio"
                                value="@( (int)TaskStatusEnum.Completed )">
                            <label class="govuk-label govuk-radios__label" for="yes">
                                Yes, I've completed this section
                            </label>
                        </div>
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="no" name="answer" type="radio"
                                value="@( (int)TaskStatusEnum.InProgress )">
                            <label class="govuk-label govuk-radios__label" for="no">
                                No, I'll come back to it later
                            </label>
                        </div>
                    </div>
                    @Html.AntiForgeryToken()
                    <div class="govuk-button-group govuk-!-margin-top-5">
                        <button type="submit" class="govuk-button">Save and continue</button>
                        <a class="govuk-link" href="@(RouteConstants.ApplicationConstants.TASK_LIST_PATH)">Cancel</a>
                    </div>
                </fieldset>
            </form>
        </div> 
    </div>
</div>